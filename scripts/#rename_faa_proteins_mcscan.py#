#!/usr/bin/env python3

import sys, os, re

with open(sys.argv[1], 'r') as fh:
    for line in fh:
        line = line.strip()
        if line.startswith(">"):
            
        else:
file
                chrom = line[0]
                                start = int(line[3])
                                                stop = int(line[4])
                                                                strand = line[6]
                                                                                #region = '{}:{}-{}'.format(chrom, start, stop)
                                                                                                if parent not in gff_cds.keys():
                                                                                                                        gff_cds[parent] = [[chrom, start, stop, strand]]
                                                                                                else:
                                                                                                                        gff_cds[parent].append([chrom, start, stop, strand])

                                                                                                                            ## goes through the input fasta file and pulls out CDS sequences
                                                                                                                                out_f = open(protein_output_file, 'w')
                                                                                                                                    record_dict = SeqIO.index(genome_fasta, "fasta")
                                                                                                                                        for mrna in gff_cds:
                                                                                                                                                    all_cds = gff_cds[mrna]
                                                                                                                                                            full_cds = ''
                                                                                                                                                                    start_flag = 0
                                                                                                                                                                            for cds in all_cds:
                                                                                                                                                                                            if start_flag == 0: ## grab the first start
                                                                                                                                                                                                                start = cds[1]
                                                                                                                                                                                                                                start_flag = 1
                                                                                                                                                                                                                                            stop   = cds[2] ## grab the last stop and strand
                                                                                                                                                                                                                                                        strand = cds[3]
                                                                                                                                                                                                                                                                    if strand == '-':
                                                                                                                                                                                                                                                                                        strand = 0
                                                                                                                                                                                                                                                                    else:
                                                                                                                                                                                                                                                                                        strand = 1
                                                                                                                                                                                                                                                                                                    seq = record_dict[cds[0]][cds[1]-1:cds[2]].seq
                                                                                                                                                                                                                                                                                                                if cds[3] == "-":
                                                                                                                                                                                                                                                                                                                                    seq = seq.reverse_complement()
                                                                                                                                                                                                                                                                                                                                                full_cds += seq
                                                                                                                                                                                                                                                                                                                                                        while len(full_cds) % 3 > 0: ## adding N's to partial CDS
                                                                                                                                                                                                                                                                                                                                                                        full_cds += 'N'
                                                                                                                                                                                                                                                                                                                                                                                protein = full_cds.translate()
                                                                                                                                                                                                                                                                                                                                                                                        outstring = ">{m_id} # {start} # {stop} # {strand}\n{seq}\n".format(m_id = mrna, start = start, stop = stop, strand = strand, seq = protein)
                                                                                                                                                                                                                                                                                                                                                                                                out_f.write(outstring)
                                                                                                                                                                                                                                                                                                                                                                                                    out_f.close()
                                                                                                                                                                                                                                                                                                                                                                                                        record_dict.close()
                                                                                                                                                                                                                                                                                                                                                                                                        ~
